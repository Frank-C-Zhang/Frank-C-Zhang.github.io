import{d as T,r as e,c as J,a as x,o as v,w as O,b as _,e as L,f as g,F as R,g as B,n as k,t as h,_ as Y,h as m,i as D,j as $,k as f,l as F}from"./index-BEkHjnzS.js";const M=()=>JSON.parse(window.localStorage.getItem("eat")||"[]"),U=n=>{const o=M();o.push(n),window.localStorage.setItem("eat",JSON.stringify(o))},j=n=>{const o=S(),a=o.find(t=>t.id===n);a.isDone=!0,window.localStorage.setItem("todoList",JSON.stringify(o))},S=()=>JSON.parse(window.localStorage.getItem("todoList")||"[]"),A=n=>{let o=S();o.find(t=>t.content===n)||(o=[{id:new Date().getTime(),content:n,isDone:!1},...o],window.localStorage.setItem("todoList",JSON.stringify(o)))},z=T({__name:"AddToModal",emits:["reloadTodo"],setup(n,{expose:o,emit:a}){const t=e(!1),s=e(""),d=a,p=()=>{s.value&&(A(s.value),t.value=!1,d("reloadTodo"))};return o({show:()=>{s.value="",t.value=!0}}),(i,c)=>{const b=x("van-field"),r=x("van-dialog");return v(),J(r,{show:t.value,"onUpdate:show":c[1]||(c[1]=u=>t.value=u),title:"代办","show-cancel-button":"",onConfirm:p},{default:O(()=>[_(b,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=u=>s.value=u),modelModifiers:{trim:!0},name:"content",placeholder:"请输入",autofocus:""},null,8,["modelValue"])]),_:1},8,["show"])}}}),q={class:"todo-list"},G=["onDblclick"],H=T({__name:"TodoList",setup(n,{expose:o}){const a=e([]),t=()=>{a.value=S().slice(0,10)},s=d=>{j(d.id),t()};return L(()=>{t()}),o({reload:()=>{t()}}),(d,p)=>(v(),g("div",q,[(v(!0),g(R,null,B(a.value,i=>(v(),g("div",{class:k(["todo-item",{finished:i.isDone}]),key:i.id,onDblclick:()=>s(i)},h(i.content),43,G))),128))]))}}),K=Y(H,[["__scopeId","data-v-f19df913"]]),P={class:"h-[100%] home-page"},Q={class:"page-wrapper mx-auto w-[80%]"},W={class:"mt-[24px]"},X={class:"mt-[24px]"},Z={class:"text-[42px] mr-[5px] count"},oo=T({__name:"index",setup(n){const o=e(m().format("YYYY年MM月DD日")),a=e(m().format("dddd")),t=e(m().diff(m("2025-07-09"),"d")+1),s=e([]),d=e(!1),p=D(()=>t.value%2===1?2:1.5),i=()=>{U(m().format("YYYY-MM-DD")),c()},c=()=>{s.value=M()},b=D(()=>s.value.find(w=>w===m().format("YYYY-MM-DD"))),r=e(!1),u=e(null),I=e(null),y=e([{name:"新增代办"},{name:"查询代办"},{name:"取消"}]);L(()=>{c(),$(()=>{setTimeout(()=>{d.value=!0},0)})});const C=w=>{w.name==="新增代办"&&u.value.show(),r.value=!1};return(w,l)=>{const N=x("van-floating-bubble"),V=x("van-action-sheet");return v(),g("div",P,[f("div",Q,[f("div",{class:k(["card bg-gray-200 shadow-sm border rounded-[8px] text-center",{show:d.value,eated:b.value}]),onDblclick:i},[f("div",null,h(o.value),1),f("div",W,h(a.value),1),f("div",X,[f("span",Z,h(p.value),1),l[3]||(l[3]=F("粒"))])],34),_(K,{re:"todoListRef"})]),_(N,{icon:"setting-o",onClick:l[0]||(l[0]=()=>{r.value=!0})}),_(V,{show:r.value,"onUpdate:show":l[1]||(l[1]=E=>r.value=E),actions:y.value,onSelect:C},null,8,["show","actions"]),_(z,{ref_key:"addTodoMobalRef",ref:u,onReloadTodo:l[2]||(l[2]=()=>I.value.reload())},null,512)])}}}),eo=Y(oo,[["__scopeId","data-v-51a271d7"]]);export{eo as default};
